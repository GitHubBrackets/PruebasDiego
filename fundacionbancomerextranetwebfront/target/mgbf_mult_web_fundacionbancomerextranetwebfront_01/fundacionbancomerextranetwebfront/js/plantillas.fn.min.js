const expRegCurp=/^[A-Z]{1}[AEIOU]{1}[A-Z]{2}[0-9]{2}(0[1-9]|1[0-2])(0[1-9]|1[0-9]|2[0-9]|3[0-1])[HM]{1}(AS|BC|BS|CC|CS|CH|CL|CM|DF|DG|GT|GR|HG|JC|MC|MN|MS|NT|NL|OC|PL|QT|QR|SP|SL|SR|TC|TS|TL|VZ|YN|ZS|NE)[B-DF-HJ-NP-TV-Z]{3}[0-9A-Z]{1}[0-9]{1}$/,expRegEmail=/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,4})+$/,expRegCalif=/10$|^\d(\.\d\d?)?$/,expRegAscNum=/01|12|23|34|45|56|67|78|89/,expRegDesNum=/98|87|76|65|54|43|32|21|10/,expRegRepeat=/((.+)?)((.)\4\4)((.+)?)/,expRegHasNumber=/\d/,expRegHasLetter=/[a-zA-Z]/;var fn_nothing=function(){},fn_confirmacion=function(){checkBoxConfirm()},fn_comboConfirmacionDepo=function(){for(var e in combos.cdRB)$("select[name='status']").append("<option value="+combos.cdRB[e]+">"+combos.cdRB[e]+"</option>")},fn_selectArchivos=function(){requerido(),$("[data-toggle=\"tooltip\"]").tooltip({placement:"top"});var e,a=0,t={};$("#uploadFiles").on("hidden.bs.modal",function(){myDropzone.removeAllFiles(!0),$("#upload-files").parent().removeClass("col-sm-6"),$(".template-preview-wrapper").removeAttr("style")}),$("#consultFiles").on("hidden.bs.modal",function(){$(this).find("#show_file").attr("src","")}),Dropzone.autoDiscover=!1,myDropzone=new Dropzone("#upload-files",{acceptedFiles:"application/pdf,image/jpeg",dictFileTooBig:"El archivo supera el tama\xF1o permitido de {{maxFilesize}} MiB",dictMaxFilesExceeded:"N\xFAmero m\xE1ximo de archivos alcanzado",dictInvalidFileType:"S\xF3lo se permiten archivos JPG y PDF",autoProcessQueue:!1,dictDefaultMessage:"",maxFiles:2,maxFilesize:10,clickable:"#uplddFiles",previewTemplate:document.getElementById("template-preview")?document.getElementById("template-preview").innerHTML:"",previewsContainer:"#template-preview",url:"/",init:function(){this.on("addedfile",function(){}),this.on("drop",function(){})},accept:function(e,o){this.element.classList.remove("hover"),this.element.parentElement.classList.add("col-sm-6"),document.querySelector(".template-preview-wrapper").style.display="block",e.idFile=a;var s=e.previewTemplate.querySelector(".btn-delete-file");s.addEventListener("click",function(){this.removeFile(e)}),t[a]={active:!0,base64:""},a++,o()},removedfile:function(e){e.previewTemplate.remove(),0==this.getAcceptedFiles().length&&($("#upload-files").parent().removeClass("col-sm-6"),$(".template-preview-wrapper").removeAttr("style"))},dragleave:function(){this.element.classList.remove("hover")},dragover:function(){this.element.classList.contains("hover")||this.element.classList.add("hover")},error:function(a,t){a.accepted||(this.removeFile(a),this.element.classList.remove("hover"),e&&clearTimeout(e),$("#mssgErrorFile").children("span").text(t),$("#mssgErrorFile").slideDown(),e=setTimeout(function(){$("#mssgErrorFile").slideUp()},3e3))}}),Dropzone.options.myDropzone=!1,$("#saveallFiles").on("click",function(e){function readIndexFile(n){if(n!=a.length){currentFile=a[n];var e=new FileReader;e.onload=function(r){if(n!=a.length){var e=r.target.result;fext=currentFile.name.split("."),fext=fext[fext.length-1],writeLog("Enviando archivo.. "+currentFile.name);var l=function(e){writeLog("resp",e)};n==a.length-1&&(l=function(e){writeLog("_end_fn",e),restExec({service:"UPLOAD_IMAGE",data:{moduleIndicator:s,studentID:scholar.studentID+"",programType:scholar.scholarship.programType,typeDocument:o,schoolGrade:t.attr("data-grade"),schoolCycle:scholar.statusQualifications.schoolCycle,schoolPeriod:t.attr("data-period"),folio:e.referenceNumber,userCurrent:scholar.studentID+""},success:function(e){"1|Boleta"==o?(writeLog("--- subi\xF3 boleta"),rest_reloadQualifications()):(writeLog("--- subi\xF3 constancia"),rest_averageQuery()),writeLog("success servicio",e),$("#"+SCONFIG.getMessage("wait").idModal).modal("hide"),showModals("Tu documento se ha guardado satisfactoriamente","Gracias por la espera","savedFile"),$("#savedFile").find("button").on("click",function(){fn_loadStatusQualifications(),$($(this)).prop("onclick",null).off("click")})}})}),pre_fnSendMultiDocument({ext:fext,filename:currentFile.name,typeDocument:o,first:(0==n)+"",last:(n==a.length-1)+"",base64:e.split(";base64,")[1],success:l}),readIndexFile(n+1)}},e.readAsDataURL(currentFile)}}e.preventDefault();var a=myDropzone.getAcceptedFiles(),t=$("#uploadFiles"),o=t.attr("data-document"),s="SE";showModals("Guardando tu(s) documento(s)","Espera un momento",SCONFIG.getMessage("wait").idModal);readIndexFile(0)}),fn_qualificationValidate(),loadShowUpdateFile()},fn_selectProfilePicture=function(){requerido(),$("[data-toggle=\"tooltip\"]").tooltip({placement:"top"});var e;$("#uploadScholarImage").on("hidden.bs.modal",function(){a.removeAllFiles(!0)}),Dropzone.autoDiscover=!1;var a=new Dropzone("#upload-scholarImage",{acceptedFiles:"image/jpeg",dictFileTooBig:"El archivo supera el tama\xF1o permitido de {{maxFilesize}} MiB",dictMaxFilesExceeded:"S\xF3lo puedes elegir una foto de perfil",dictInvalidFileType:"Tu foto debe ser en formato JPG",autoProcessQueue:!1,dictDefaultMessage:"",maxFiles:1,maxFilesize:5,previewTemplate:"<div style=\"display:none\"></div>",clickable:"#uploadImage",url:"/",init:function(){this.on("addedfile",function(){}),this.on("drop",function(){})},accept:function(a,e){this.element.classList.remove("hover");var t=new FileReader;t.onload=function(t){var e=t.target.result;""!==e&&($("#uploadScholarImage").modal("hide"),fext=a.name.split("."),fext=fext[fext.length-1],pre_fnSendDocument({typeDocument:"10|Foto",moduleIndicator:"FB",ext:fext,filename:a.name,base64:e.split(";base64,")[1]}))},t.readAsDataURL(a),e()},dragleave:function(){this.element.classList.remove("hover")},dragover:function(){this.element.classList.contains("hover")||this.element.classList.add("hover")},error:function(a,t){a.accepted||(this.removeFile(a),this.element.classList.remove("hover"),e&&clearTimeout(e),$("#mssgError").children("span").text(t),$("#mssgError").slideDown(),errorFileTimer=setTimeout(function(){$("#mssgError").slideUp()},3e3))}})},fn_loadStatusQualifications=function(){writeLog("fn_loadStatusQualifications");var e=$("select[name='cursando'] option:selected").val(),a=$("select[name='grado'] option:selected").val(),t=-1,o=-1;for(i=0;i<scholar.statusQualifications.averagesSchoolGrade.length;i++)if(scholar.statusQualifications.averagesSchoolGrade[i].scholarLevel==e){for(var s in scholar.statusQualifications.averagesSchoolGrade[i].averagesSchoolGrade)if(scholar.statusQualifications.averagesSchoolGrade[i].averagesSchoolGrade[s].schoolGrade==a){t=i,o=s,loadTemplate("calificacionesBecario",templates.calificacion,{actLevel:e,average:scholar.statusQualifications.averagesSchoolGrade[i].averagesSchoolGrade[s].averageSchoolGrade});break}break}if(scholar.statusQualifications.averagesScholarLevel.forEach(function(t,o){if(t.scholarLevel==e&&t.schoolGrade==a){var s=document.createElement("div"),n=document.createAttribute("id");n.value="calif"+o,s.setAttributeNode(n),document.getElementById("calificacionA").appendChild(s),Tempstyle="style=\"display:none;\"",(""!=t.folio||0!=t.qualification)&&(Tempstyle=""),loadTemplate("calif"+o,templates.areaCalificacion,{periodEval:t.schoolPeriod,average:t.qualification,schoolGrade:t.schoolGrade,showboleta:Tempstyle,index:o}),r=""==t.folio||t.isMissing?templates.emptyBoleta:templates.boleta,loadTemplate("boleta-area-"+o,r,{schoolGrade:t.schoolGrade,schoolPeriod:t.schoolPeriod,index:o,folio:t.folio})}}),-1!=t&&-1!=o&&(constancy=scholar.statusQualifications.averagesSchoolGrade[t].averagesSchoolGrade[o].folio.split("|"),2==constancy.length)){var n=document.createElement("div");n.setAttribute("id","missingConstancy");var r=templates.constancia;""==constancy[1]&&(r=templates.emptyConstancia),document.getElementById("calificacionA").appendChild(n),loadTemplate("missingConstancy",r,{schoolGrade:constancy[0],schoolPeriod:"",folio:constancy[1]})}fn_selectArchivos(),loadShowUpdateFile()},fn_scholarheader=function(){fn_loadProfilePicture(),fn_selectProfilePicture(),fn_showAlerts(),loadIndex()},fn_home=function(){writeLog("fn_home"),fn_opcCursandoGrado(),loadCardsConfirmHome()};function loadCardsConfirmHome(){loadTemplate("cardConfirm",templates.cardConfirmIntership,{title:"\xBFRecibiste tu beca?",message:"Meses pendientes de confirmar:"}),0==scholar.confirm.length&&0==$("#pendingCard > .card").length&&(0==scholar.scholarship.confirmDispersion.length?loadTemplate("messageThanks",templates.confirmAll,{thanks:"\xA1Bienvenido!",message:"Aqu\xED aparecer\xE1n tus dep\xF3sitos por confirmar"}):loadTemplate("messageThanks",templates.confirmAll,{thanks:"Gracias",message:"Por confirmar tus dep\xF3sitos"}),$("#btnSendConfirm").hide(),$("p[name='pending']").hide()),0==scholar.confirm.length&&1==$("#pendingCard > .card").length&&$("#cardConfirm").hide(),loadPendingCards(),fn_comboConfirmacionDepo()}var fn_misCalificaciones=function(){fn_opcCursandoGrado()},fn_opcCursandoGrado=function(){for(isSelec_="",e=0;e<scholar.statusQualifications.schoolLevels.length;e++)$("select[name='cursando']>option[value="+scholar.statusQualifications.schoolLevels[e].scholarLevel+"]").length||(e==scholar.statusQualifications.schoolLevels.length-1&&(isSelec_="selected"),$("select[name='cursando']").append("<option "+isSelec_+" value=\""+scholar.statusQualifications.schoolLevels[e].scholarLevel+"\">"+scholar.statusQualifications.schoolLevels[e].scholarLevel+"</option>"));for(var e in scholar.statusQualifications.schoolLevels)if(scholar.statusQualifications.schoolLevels[e].scholarLevel==$("select[name='cursando'] option:selected").text())for(var a in scholar.statusQualifications.schoolLevels[e].scholarGrades)$("select[name='grado']").append("<option value=\""+scholar.statusQualifications.schoolLevels[e].scholarGrades[a].scholarGrade+"\">"+scholar.statusQualifications.schoolLevels[e].scholarGrades[a].scholarGrade+"</option>");$("select[name='grado'] option:last").attr("selected","selected"),fn_consultaCalificacionesAnteriores()},fn_consultaCalificacionesAnteriores=function(){$("select[name='cursando']").change(function(){$("select[name='grado']").text(""),scholar.statusQualifications.schoolLevels.forEach(function(e){if(e.scholarLevel==$("select[name='cursando'] option:selected").text())for(j=0;j<e.scholarGrades.length;j++)$("select[name='grado']").append("<option value=\""+e.scholarGrades[j].scholarGrade+"\">"+e.scholarGrades[j].scholarGrade+"</option>")}),$("select[name='grado'] option:last").attr("selected","selected")}),$("select[name='cursando'], select[name='grado']").change(function(){fn_loadStatusQualifications()}),fn_loadStatusQualifications()};function loadMisDatos(){$("#btnMisDatos").addClass("active"),$("#btnMiBeca, #btnMisCalificaciones, #btnMisTutores").removeClass("active"),loadTemplate("templateInicio",templates.misDatos,{user:scholar.personalData.username,scholarName:scholar.personalData.name,schoolGrade:scholar.statusQualifications.schoolGrade,program:scholar.scholarship.programName,actLevel:scholar.statusQualifications.schoolLevels[scholar.statusQualifications.schoolLevels.length-1].scholarLevel,lastName:scholar.personalData.lastName,secondLastName:scholar.personalData.secondLastName,age:scholar.personalData.age,cr:scholar.personalData.assignedCR,accountNumber:"******"+scholar.personalData.accountNumber.toString().slice(-4),status:scholar.scholarship.statusDispersion,programStatus:scholar.program[0].status,modality:scholar.scholarship.modalityParticipation,schoolName:scholar.schoolData.name,schoolDomicile:scholar.schoolData.domicile,schoolType:scholar.schoolData.type,turn:scholar.schoolData.turn,typeCareer:scholar.schoolData.typeCareer,control:scholar.schoolData.control,cct:scholar.schoolData.cct,schoolState:scholar.schoolData.state,schoolMunicipality:scholar.schoolData.municipality})}var fn_misDatos=function(){for(var e in actTable(),$("[data-toggle=\"tooltip\"]").tooltip({placement:"top"}),$(".input-group.date").datetimepicker({format:"DD-MM-YYYY",locale:"es",minDate:new Date(80,0,1),maxDate:new Date}),$(".letrasCurp").keypress(function(e){return writeLog(e.charCode),48<=e.charCode&&57>=e.charCode||65<=e.charCode&&90>=e.charCode||97<=e.charCode&&122>=e.charCode||0==e.charCode}),$("input[name='birthdate']").keyup(function(){""!==$("input[name='birthdate']").val()&&($("input[name='birthdate']").parent().parent().removeClass("has-error"),$("#nobirthdate").fadeOut("fast",function(){$("#nobirthdate").remove()}))}),$(".icon-167").click(function(e){e.preventDefault(),$("input[name='birthdate']").parent().parent().removeClass("has-error"),$("#nobirthdate").fadeOut("fast",function(){$("#nobirthdate").remove()})}),$(".numeros").keypress(function(e){return 48<=e.charCode&&57>=e.charCode}),$("#curp2").keyup(function(){curpIn=$("#curp2").val(),validacion=expRegCurp.test(curpIn),validacion&&($("#curp2").removeClass("has-error"),$("#noCurp2").fadeOut("fast",function(){$("#noCurp2").remove()}))}),$("#principalEmail,#firstOptionalEmail,#secondOptionalEmail").keyup(function(){pEmail=$("#principalEmail").val(),email1=$("#firstOptionalEmail").val(),email2=$("#secondOptionalEmail").val(),validacionPEmail=expRegEmail.test(pEmail),validacionEmail1=expRegEmail.test(email1),validacionEmail2=expRegEmail.test(email2),writeLog(validacionPEmail),validacionPEmail&&($("#principalEmail").removeClass("has-error"),$("#noPEmail").fadeOut("fast",function(){$("#noPEmail").remove()}),$("#principalEmail").blur(function(){$("#principalEmail").removeClass("has-error")})),(validacionEmail1||""===email1)&&($("#firstOptionalEmail").removeClass("has-error"),$("#noEmail1").fadeOut("fast",function(){$("#noEmail1").remove()}),$("#firstOptionalEmail").blur(function(){$("#firstOptionalEmail").removeClass("has-error")})),(validacionEmail2||""===email2)&&($("#secondOptionalEmail").removeClass("has-error"),$("#noEmail2").fadeOut("fast",function(){$("#noEmail2").remove()}),$("#secondOptionalEmail").blur(function(){$("#secondOptionalEmail").removeClass("has-error")}))}),$("input[name='btnSendInfo']").click(function(e){e.preventDefault();var a={userCurrent:scholar.studentID,student:[{studentId:scholar.studentID,programType:scholar.scholarship.programType,statusDispersion:scholar.scholarship.statusDispersion,cdOriginState:scholar.personalData.cdOriginState,originState:scholar.personalData.originState,cdOriginMunicipality:scholar.personalData.cdOriginMunicipality,originMunicipality:scholar.personalData.originMunicipality,originRegion:scholar.personalData.originRegion,schoolCycle:scholar.statusQualifications.schoolCycle,cdAssignedCR:scholar.personalData.cdAssignedCR,assignedCR:scholar.personalData.assignedCR,scholarNumber:scholar.personalData.scholarNumber,accountNumber:scholar.personalData.accountNumber,folioPhoto:scholar.personalData.profilePicture,name:scholar.personalData.name,firstName:scholar.personalData.lastName,lastName:scholar.personalData.secondLastName,CURP:scholar.personalData.curp,scholarBirthdate:scholar.personalData.birthdate,gender:scholar.personalData.gender,schoolData:[{duration:scholar.schoolData.duration,turn:scholar.schoolData.turn,typeCareer:scholar.schoolData.typeCareer,nameCareer:scholar.schoolData.name,area:scholar.schoolData.area,school:[{cdState:scholar.schoolData.cdState,state:scholar.schoolData.state,cdMunicipality:scholar.schoolData.cdMunicipality,municipality:scholar.schoolData.municipality,CCT:scholar.schoolData.cct,control:scholar.schoolData.control,initials:scholar.schoolData.initials,type:scholar.schoolData.type,name:scholar.schoolData.name,domicile:scholar.schoolData.domicile}]}],domicile:[{street:scholar.domicile.street,locality:scholar.domicile.locality,numExterior:scholar.domicile.numExterior,numInterior:scholar.domicile.numInterior,codePostal:scholar.domicile.codePostal,cdMunicipality:scholar.domicile.cdMunicipality,municipality:scholar.domicile.municipality,colony:scholar.domicile.colony,cdState:scholar.domicile.cdState,state:scholar.domicile.state,betweenStreet:scholar.domicile.betweenStreet,typeOfRoad1:scholar.domicile.typeOfRoad1,andTheStreet:scholar.domicile.andTheStreet,typeOfRoad2:scholar.domicile.typeOfRoad2,behindStreet:scholar.domicile.behindStreet,typeOfRoad3:scholar.domicile.typeOfRoad3,particularReferences:scholar.domicile.particularReferences}],contactInf:[{homePhone:scholar.contactData.homePhone,cellPhone:scholar.contactData.cellPhone,messagePhone:scholar.contactData.messagePhone,email:scholar.contactData.email,email1:scholar.contactData.email1,email2:scholar.contactData.email2}],tutorData:[{tutorName:scholar.tutorData.name,firstNameTutor:scholar.tutorData.lastName,lastNameTutor:scholar.tutorData.secondLastName,kinship:scholar.tutorData.kinship,kinshipType:scholar.tutorData.kinshipType}],program:scholar.program}]};btnID=$(this).attr("id");var t=!1;"btnPersonalInformation"===btnID?(writeLog("btnPersonalInformation"),$("#nobirthdate").remove(),$("#noCurp2").remove(),""===$("input[name='birthdate']").val()&&($("input[name='birthdate']").parent().parent().addClass("has-error"),$(".date").focus().after("<small style='color: #c8175e' id='nobirthdate'>Por favor ingresa tu fecha de nacimiento</small>"),t=!0),curp=$("#curp2").val(),validacion=expRegCurp.test(curp),""===$("#curp2").val()?t=!0:!validacion&&(t=!0,$("#curp2").addClass("has-error"),$("#seccCurp").focus().after("<span id='noCurp2'><br/><span style='color: #c8175e; font-size:80%'>Por favor verifica tu CURP</span></span>")),0==$("select[name='gender'] option:selected").val()&&(t=!0),writeLog(t),writeLog("hasErrorPersonalInfo"),a.student[0].CURP=$("#curp2").val(),a.student[0].scholarBirthdate=$("input[name='birthdate']").val(),a.student[0].gender=$("select[name='gender'] option:selected").val(),writeLog("!hasErrorPersonalInfo  misDatosJSON",a)):"btnSendDomicile"===btnID?(writeLog("btnSendDomicile"),(""==$("input[name='street']").val()||""==$("input[name='numExterior']").val()||""==$("input[name='postalCode']").val()||""==$("input[name='localityHouse']").val()||""==$("input[name='colonyHouse']").val()||""==$("input[name='betweenStreet']").val()||""==$("input[name='andTheStreet']").val()||""==$("input[name='behindStreet']").val()||""==$("textarea[name='references']").val()||0==$("select[name='stateHouse'] option:selected").val()||0==$("select[name='municipalityHouse'] option:selected").val()||0==$("#road1 option:selected").val()||0==$("#road2 option:selected").val()||0==$("#road3 option:selected").val())&&(t=!0),a.student[0].domicile[0]={street:$("input[name='street']").val(),locality:$("input[name='localityHouse']").val(),numExterior:$("input[name='numExterior']").val(),numInterior:$("input[name='numInterior']").val(),codePostal:$("input[name='postalCode']").val(),cdMunicipality:$("select[name='municipalityHouse'] option:selected").val(),municipality:$("select[name='municipalityHouse'] option:selected").text(),colony:$("input[name='colonyHouse']").val(),cdState:$("select[name='stateHouse'] option:selected").val(),state:$("select[name='stateHouse'] option:selected").text(),betweenStreet:$("input[name='betweenStreet']").val(),typeOfRoad1:$("#road1 option:selected").val(),andTheStreet:$("input[name='andTheStreet']").val(),typeOfRoad2:$("#road2 option:selected").val(),behindStreet:$("input[name='behindStreet']").val(),typeOfRoad3:$("#road3 option:selected").val(),particularReferences:$("textarea[name='references']").val()}):"btnSaveContactInformation"===btnID?(writeLog("btnSaveContactInformation"),$("#noPEmail").remove(),$("#noEmail1").remove(),$("#noEmail2").remove(),""===$("#principalEmail").val()?t=!0:(pEmail=$("#principalEmail").val(),validacionPEmail=expRegEmail.test(pEmail),!validacionPEmail&&(0==$("#principalEmail").next("span#noPEmail").length&&($("#principalEmail").focus().after("<span id='noPEmail'><br/><span style='color: #c8175e; font-size:80%'>Por favor verifica el correo</span></span>"),$("#principalEmail").blur(function(){$("#principalEmail").addClass("has-error")})),t=!0)),""!==$("#firstOptionalEmail").val()&&(email1=$("#firstOptionalEmail").val(),validacionEmail1=expRegEmail.test(email1),!validacionEmail1&&(0==$("#firstOptionalEmail").next("span#noEmail1").length&&($("#firstOptionalEmail").focus().after("<span id='noEmail1'> <br/> <span style='color: #c8175e; font-size:80%'>Por favor verifica el correo</span></span>"),$("#firstOptionalEmail").blur(function(){$("#firstOptionalEmail").addClass("has-error")})),t=!0)),""!==$("#secondOptionalEmail").val()&&(email2=$("#secondOptionalEmail").val(),validacionEmail2=expRegEmail.test(email2),!validacionEmail2&&(0==$("#secondOptionalEmail").next("span#noEmail2").length&&($("#secondOptionalEmail").focus().after("<span id='noEmail2'><br/><span style='color: #c8175e; font-size:80%'>Por favor verifica el correo</span>"),$("#secondOptionalEmail").blur(function(){$("#secondOptionalEmail").addClass("has-error")})),t=!0)),$("input[name='tCasa']").val(parseInt($("input[name='tCasa']").val(),10)+""),$("input[name='tCel']").val(parseInt($("input[name='tCel']").val()+"",10)+""),$("input[name='tRecados']").val(parseInt($("input[name='tRecados']").val()+"",10)+""),$("input[name='tCasa'],[name='tCel'],[name='tRecados']").each(function(){("undefined"!=typeof $(this).attr("minLength")&&$(this).val().length<$(this).attr("minLength")||"undefined"!=typeof $(this).attr("maxLength")&&$(this).val().length>$(this).attr("maxLength")||""==$(this).val())&&(t=!0)}),a.student[0].contactInf[0]={homePhone:$("input[name='tCasa']").val(),cellPhone:$("input[name='tCel']").val(),messagePhone:$("input[name='tRecados']").val(),email:$("input[name='email1']").val(),email1:$("input[name='email2']").val(),email2:$("input[name='email3']").val()}):"btnSendTutorData"===btnID?(writeLog("btnSendTutorData"),(""==$("input[name='tutorName']").val()||""==$("input[name='tutorLastName']").val()||0==$("select[name='relation'] option:selected").val())&&(t=!0),"OTRO"==$("select[name='relation'] option:selected").val()&&""==$("input[name='relation_other']").val()&&(t=!0),a.student[0].tutorData[0]={tutorName:$("input[name='tutorName']").val(),firstNameTutor:$("input[name='tutorLastName']").val(),lastNameTutor:$("input[name='tutorSecondLastName']").val(),kinship:$("select[name='relation'] option:selected").val(),kinshipType:$("input[name='relation_other']").val()}):void 0,t||restExec({service:"MODIF_UPLOADSCHOLAR",data:a,showWait:!0,customWait:{title:"Guardando datos",message:"Por favor espera."},success:rest_fnModifUploadScholar,finallySuccess:function(){loadMisDatos(),showModals("Se han modificado tus datos","Gracias","savedFile")}})}),0!==scholar.confirm.length&&loadTemplate("depositosPendientes",templates.depositosPendientesBeca,{title:"Confirmaciones de dep\xF3sitos pendientes"}),"Universidad"==scholar.statusQualifications.averagesScholarLevel[scholar.statusQualifications.averagesScholarLevel.length-1].scholarLevel&&loadTemplate("universityData",templates.uniInformation,{typeOfCareer:scholar.schoolData.typeCareer,careerName:scholar.schoolData.nameCareer,area:scholar.schoolData.area,duration:scholar.schoolData.duration}),$(".letras").keypress(function(e){return writeLog("key.charCode",e.charCode),(97>e.charCode||122<e.charCode)&&(65>e.charCode||90<e.charCode)&&241!==e.charCode&&209!==e.charCode&&32!==e.charCode&&225!==e.charCode&&233!==e.charCode&&237!==e.charCode&&243!==e.charCode&&250!==e.charCode&&193!==e.charCode&&201!==e.charCode&&205!==e.charCode&&211!==e.charCode&&218!==e.charCode&&0!==e.charCode?!1:!0}),$("select.other-relation").on("change",function(){$(this).val()===$(this).find(".other-relation-op").attr("value")?($(this).closest("form").find(".other-relation-target").show(),$(this).closest("form").find(".other-relation-target").find("input").val("").focus()):$(this).closest("form").find(".other-relation-target").hide(),$(this).closest("#new-staff-form")&&$("#btn-new-staff").removeAttr("disabled")}),$("#changePassword").click(function(e){e.preventDefault(),loadTemplate("templateInicio",templates.newPassword,{title:"Ingresa tu nueva contrase\xF1a"})}),$("a[data-toggle='tooltip']").click(function(e){"#"===$(this).attr("href")&&e.preventDefault()}),""!=scholar.personalData.originRegion&&$("label[name='originRegion']").text(scholar.personalData.originRegion),""!=scholar.personalData.originState&&$("label[name='originState']").text(scholar.personalData.originState),""!=scholar.personalData.originMunicipality&&$("label[name='originMunicipality']").text(scholar.personalData.originMunicipality),""!=scholar.personalData.curp.trim()&&$("input[name='curp']").val(scholar.personalData.curp),""!=scholar.personalData.birthdate.trim()&&$("input[name='birthdate']").val(scholar.personalData.birthdate),""!=scholar.domicile.street.trim()&&$("input[name='street']").val(scholar.domicile.street),""!=scholar.domicile.numExterior.trim()&&$("input[name='numExterior']").val(scholar.domicile.numExterior),""!=scholar.domicile.numInterior.trim()&&$("input[name='numInterior']").val(scholar.domicile.numInterior),""!=scholar.domicile.codePostal&&$("input[name='postalCode']").val(scholar.domicile.codePostal),""!=scholar.domicile.betweenStreet.trim()&&$("input[name='betweenStreet']").val(scholar.domicile.betweenStreet),""!=scholar.domicile.andTheStreet.trim()&&$("input[name='andTheStreet']").val(scholar.domicile.andTheStreet),""!=scholar.domicile.behindStreet.trim()&&$("input[name='behindStreet']").val(scholar.domicile.behindStreet),""!==scholar.domicile.particularReferences.trim()&&$("textarea[name='references']").val(scholar.domicile.particularReferences),""!=scholar.domicile.locality.trim()&&$("input[name='localityHouse']").val(scholar.domicile.locality),""!=scholar.domicile.colony.trim()&&$("input[name='colonyHouse']").val(scholar.domicile.colony),""!=scholar.contactData.homePhone.trim()&&$("input[name='tCasa']").val(scholar.contactData.homePhone),""!==scholar.contactData.cellPhone.trim()&&$("input[name='tCel']").val(scholar.contactData.cellPhone),""!=scholar.contactData.messagePhone.trim()&&$("input[name='tRecados']").val(scholar.contactData.messagePhone),""!=scholar.contactData.email.trim()&&$("input[name='email1']").val(scholar.contactData.email),""!=scholar.contactData.email1.trim()&&$("input[name='email2']").val(scholar.contactData.email1),""!=scholar.contactData.email2.trim()&&$("input[name='email3']").val(scholar.contactData.email2),""!==scholar.tutorData.name.trim()&&$("input[name='tutorName']").val(scholar.tutorData.name),""!=scholar.tutorData.lastName.trim()&&$("input[name='tutorLastName']").val(scholar.tutorData.lastName),""!=scholar.tutorData.secondLastName.trim()&&$("input[name='tutorSecondLastName']").val(scholar.tutorData.secondLastName),combos.gender)$("select[name='gender']").append("<option value="+combos.gender[e]+">"+combos.gender[e]+"</option>");for(var e in combos.typeOfViality)$("select[name='vialidad']").append("<option value="+combos.typeOfViality[e]+">"+combos.typeOfViality[e]+"</option>");for(var e in combos.kindship)$("select[name='relation']").append("<option value="+combos.kindship[e]+">"+combos.kindship[e]+"</option>"),1==$("select[name='relation']>option[value='OTRO']").length&&$("select[name='relation']>option[value='OTRO']").addClass("other-relation-op");for(var e in statesTransactions)selectedStr=statesTransactions[e].state.name==scholar.domicile.state?"selected":"",$("select[name='stateHouse']").append("<option value="+statesTransactions[e].state.code+" "+selectedStr+">"+statesTransactions[e].state.name+"</option>");0!=currentStateMunicipality.municipalityTransactions.length&&currentStateMunicipality.municipalityTransactions[0].municipality.state.name==scholar.domicile.state?fn_listMunicipality(currentStateMunicipality):fn_getMunicipality(),""==scholar.personalData.gender.trim()?$("select[name='gender']>option[value=0]").attr("selected",!0):$("select[name='gender']>option[value="+scholar.personalData.gender+"]").attr("selected",!0),""==scholar.domicile.typeOfRoad1.trim()?$("#road1>option[value=0]").attr("selected",!0):$("#road1>option[value="+scholar.domicile.typeOfRoad1+"]").attr("selected",!0),""==scholar.domicile.typeOfRoad2.trim()?$("#road2>option[value=0]").attr("selected",!0):$("#road2>option[value="+scholar.domicile.typeOfRoad2+"]").attr("selected",!0),""==scholar.domicile.typeOfRoad2.trim()?$("#road3>option[value=0]").attr("selected",!0):$("#road3>option[value="+scholar.domicile.typeOfRoad3+"]").attr("selected",!0),""==scholar.tutorData.kinship.trim()?$("select[name='relation']>option[value=0]").attr("selected",!0):($("select[name='relation']>option[value="+scholar.tutorData.kinship.replace("(","\\(").replace(")","\\)")+"]").attr("selected",!0),"OTRO"==scholar.tutorData.kinship&&($("select.other-relation").closest("form").find(".other-relation-target").show(),$("select.other-relation").closest("form").find(".other-relation-target").find("input").val(scholar.tutorData.kinshipType.trim()).focus())),""==scholar.scholarship.confirmDispersion&&$("#accordion-deposit").hide(),$("select[name='stateHouse']").on("change",fn_getMunicipality),requerido()},fn_getMunicipality=function(){selectedState=$("select[name='stateHouse']").val(),writeLog("selectedState ",selectedState),$("select[name='municipalityHouse']").empty(),$("select[name='municipalityHouse']").append("<option value=\"0\">Selecciona</option>"),0!=selectedState&&rest_getMunicipality(selectedState)},fn_listMunicipality=function(e){for(var a in actualstate=scholar.domicile.state==e.municipalityTransactions[0].municipality.state.name,actualstate&&currentStateMunicipality!=e&&(currentStateMunicipality=e),e.municipalityTransactions)actualmunicipalitystr=actualstate&&e.municipalityTransactions[a].municipality.name==scholar.domicile.municipality?"selected":"",$("select[name='municipalityHouse']").append("<option value="+e.municipalityTransactions[a].municipality.code+" "+actualmunicipalitystr+">"+e.municipalityTransactions[a].municipality.name+"</option>")},fn_confirmacionMesesPendientesBeca=function(){for(var e in scholar.confirm){var a=document.createElement("div"),t=document.createAttribute("id");t.value="confirmacion"+scholar.confirm[e].idMonth,a.setAttributeNode(t),document.getElementById("confirmacion").appendChild(a),loadTemplate(t.value,templates.mesesPendientesBeca,{idMonth:scholar.confirm[e].idMonth,month:scholar.confirm[e].month,year:scholar.confirm[e].year})}confirmacionPagoBeca(),fn_comboConfirmacionDepo()},fn_loadProfilePicture=function(){scholar.personalData.base64ProfilePicture&&($("[data-target=\"#uploadScholarImage\"]").css("background-image","url("+scholar.personalData.base64ProfilePicture+")","background-size","10px 10px"),$("#iconoBecario").removeClass("icon-49"))},fn_qualificationValidate=function(){$("input[name='score']").keypress(function(e){return 48<=e.charCode&&58>e.charCode||46==e.charCode}),$("#btnSaveDocs").click(function(e){e.preventDefault(),scores=$(".inscore"),scoresToSend=[],score_HasError=!1,scores.each(function(){$iScore=$(this),old_score=$iScore.attr("data-iscore"),in_score=$iScore.val(),writeLog("in_score ",in_score),writeLog("old score ",old_score),in_score!=old_score&&(in_grade=$iScore.attr("data-grade"),in_period=$iScore.attr("data-period"),""!==in_score&&expRegCalif.test(in_score)&&"0"!==in_score?scoresToSend.push({studentID:scholar.studentID+"",programType:scholar.scholarship.programType,schoolGrade:in_grade,schoolCycle:scholar.statusQualifications.schoolCycle,schoolPeriod:in_period,qualification:in_score,userCurrent:scholar.studentID+""}):(score_HasError=!0,$("#e"+$iScore.attr("id")).remove(),$($iScore.attr("data-helpsoce")).focus().after("<span id='e"+$iScore.attr("id")+"'><br/><span style='color: #c8175e; font-size:80%; margin-left:87px'>Ingresa una calificaci&oacute;n valida</span>"),$iScore.parent(".form-group.no-grid").addClass("has-error"),$iScore.blur()))}),scoresToSend.length&&!score_HasError&&(_modal=SCONFIG.getMessage("wait"),showModals(_modal.title,_modal.message,_modal.idModal),setTimeout(function(){_hasErrorScore=!1,_scoreInd=0;do writeLog("guardando",scoresToSend[_scoreInd]),restExec({service:"UPDATE_QUALIFICATION",data:scoresToSend[_scoreInd],finallyError:function(){_hasErrorScore=!0}}),_scoreInd++;while(!_hasErrorScore&&_scoreInd<scoresToSend.length);_hasErrorScore||(rest_averageQuery(),rest_reloadQualifications(),showModals("Tu calificaci\xF3n se ha guardado satisfactoriamente","Gracias por la espera","savedFile"),$("#savedFile").find("button").on("click",function(){writeLog("reload calification"),fn_loadStatusQualifications(),$($(this)).prop("onclick",null).off("click")}))},400))}),$("input.inscore").keyup(function(){inputScore=$(this),score=inputScore.val(),validateScore=expRegCalif.test(score),validateScore&&"0"!=score&&($("#e"+inputScore.attr("id")).fadeOut(),inputScore.parent(".form-group.no-grid").removeClass("has-error"),inputScore.blur(function(){inputScore.parent(".form-group.no-grid").removeClass("has-error")}),!$(inputScore.attr("data-boletaid")).is(":visible")&&$(inputScore.attr("data-boletaid")).fadeIn("slow"))})},fn_validatePasswords=function(){function isIncreasing(e){for(itIs=!1,passUP=e.toUpperCase(),i=0;i<a.length;i++)if(-1!=passUP.indexOf(a[i])||-1!=passUP.indexOf(t[i])){itIs=!0;break}return itIs}$("button[href='#']").click(function(e){e.preventDefault()});const e="ABCDEFGHIJKLMN\xD1OPQRSTUVWXYZ";var a=[],t=[];for(longi=5,i=0;i<e.length-longi+1;i++)sect=e.substring(i,i+longi),a.push(sect),t.push(sect.split("").reverse().join(""));$("#btnChangePassword").click(function(e){e.preventDefault(),writeLog("btnChangePassword"),$("#diffPass").remove(),$("#numSequences").remove(),$("#repeatChar").remove(),$("#abcdario").remove(),$("#nullPass").remove(),$("#elongPass").remove(),$("#notHasN").remove(),$("#notHasL").remove(),pass1=$("input[name='newPassword']").val(),pass2=$("input[name='confirmPassword']").val(),errorPW=!1,""!==pass1&&""!==pass2?((10!=pass1.length||10!=pass2.length)&&($("input[name='confirmPassword']").focus().after("<span class='text-danger' id='elongPass' style='font-size:80%'>Contrase\xF1as deben tener longitud de 10 caracteres \n </span>"),$("input[name='newPassword'], input[name='confirmPassword']").addClass("has-error"),$("input[name='newPassword'], input[name='confirmPassword']").blur(function(){$("input[name='newPassword']").addClass("has-error"),$("input[name='confirmPassword']").addClass("has-error")}),errorPW=!0),!expRegHasNumber.test(pass1)&&($("input[name='confirmPassword']").focus().after("<span class='text-danger' id='notHasN' style='font-size:80%'>Debe contener al menos un n\xFAmero \n </span>"),$("input[name='newPassword']").addClass("has-error"),$("input[name='newPassword'], input[name='confirmPassword']").blur(function(){$("input[name='newPassword']").addClass("has-error"),$("input[name='confirmPassword']").addClass("has-error")}),errorPW=!0),!expRegHasLetter.test(pass1)&&($("input[name='confirmPassword']").focus().after("<span class='text-danger' id='notHasL' style='font-size:80%'>Debe contener al menos una letra \n </span>"),$("input[name='newPassword']").addClass("has-error"),$("input[name='newPassword'], input[name='confirmPassword']").blur(function(){$("input[name='newPassword']").addClass("has-error"),$("input[name='confirmPassword']").addClass("has-error")}),errorPW=!0),pass1!==pass2&&($("input[name='confirmPassword']").focus().after("<span class='text-danger' id='diffPass' style='font-size:80%'>Contrase\xF1as diferentes, por favor verificalas \n </span>"),$("input[name='newPassword']").addClass("has-error"),$("input[name='newPassword'], input[name='confirmPassword']").blur(function(){$("input[name='newPassword']").addClass("has-error"),$("input[name='confirmPassword']").addClass("has-error")}),errorPW=!0),(expRegAscNum.test(pass1)||expRegDesNum.test(pass1))&&($("input[name='confirmPassword']").focus().after("<span class='text-danger' id='numSequences' style='font-size:80%'>No se permiten n\xFAmeros de forma ascendente y/o descendente <br /> </span>"),$("input[name='newPassword'], input[name='confirmPassword']").addClass("has-error"),$("input[name='newPassword'], input[name='confirmPassword']").blur(function(){$("input[name='newPassword'], input[name='confirmPassword']").addClass("has-error")}),errorPW=!0),expRegRepeat.test(pass1)&&($("input[name='confirmPassword']").focus().after("<span class='text-danger' id='repeatChar' style='font-size:80%'>No se permiten m\xE1s de 2 letras y/o n\xFAmeros iguales de forma consecutiva <br /></span>"),$("input[name='newPassword'], input[name='confirmPassword']").addClass("has-error"),$("input[name='newPassword'], input[name='confirmPassword']").blur(function(){$("input[name='newPassword'], input[name='confirmPassword']").addClass("has-error")}),errorPW=!0),isIncreasing(pass1)&&($("input[name='confirmPassword']").focus().after("<span class='text-danger' id='abcdario' style='font-size:80%'>No se permiten m\xE1s de 2 letras y/o n\xFAmeros iguales de forma consecutiva <br /></span>"),$("input[name='newPassword'], input[name='confirmPassword']").addClass("has-error"),$("input[name='newPassword'], input[name='confirmPassword']").blur(function(){$("input[name='newPassword'], input[name='confirmPassword']").addClass("has-error")}),errorPW=!0),!errorPW&&(writeLog("!errorPW"),restExec({service:"SCHOLAR_UPDATEPASSWORD",data:{alias:scholar.personalData.username,password:$("#newPassword").val()},showWait:!0,customWait:{title:"Actualizando tu contrase\xF1a",message:"Espera un momento"},success:rest_fnUpdatePassword}))):($("input[name='confirmPassword']").focus().after("<span class='text-danger' id='nullPass' style='font-size:80%'>Por favor llena los campos<br /></span>"),$("input[name='newPassword'], input[name='confirmPassword']").addClass("has-error"),$("input[name='newPassword'], input[name='confirmPassword']").blur(function(){$("input[name='newPassword'], input[name='confirmPassword']").addClass("has-error")}),errorPW=!0)}),$("input[name='newPassword'], input[name='confirmPassword']").keyup(function(){pass1=$("input[name='newPassword']").val(),pass2=$("input[name='confirmPassword']").val(),""!==pass1&&""!==pass2&&$("#nullPass").fadeOut(),10==pass1.length&&10==pass2.length&&$("#elongPass").fadeOut(),expRegHasNumber.test(pass1)&&$("#notHasN").fadeOut(),expRegHasLetter.test(pass1)&&$("#notHasL").fadeOut(),pass1===pass2&&$("#diffPass").fadeOut(),expRegAscNum.test(pass1)||expRegDesNum.test(pass1)||expRegAscNum.test(pass2)||expRegDesNum.test(pass2)||$("#numSequences").fadeOut(),expRegRepeat.test(pass1)||expRegRepeat.test(pass1)||expRegRepeat.test(pass2)||expRegRepeat.test(pass2)||$("#repeatChar").fadeOut(),isIncreasing(pass1)||$("#abcdario").fadeOut(),pass1!==pass2||expRegAscNum.test(pass1)||expRegDesNum.test(pass1)||expRegRepeat.test(pass1)||expRegRepeat.test(pass1)||10!=pass1.length||10!=pass2.length||!expRegHasNumber.test(pass1)||!expRegHasLetter.test(pass1)||isIncreasing(pass1)||($("input[name='newPassword']").removeClass("has-error"),$("input[name='confirmPassword']").removeClass("has-error"),$("input[name='newPassword'], input[name='confirmPassword']").blur(function(){$("input[name='newPassword'], input[name='confirmPassword']").removeClass("has-error")}))}),$("#btnCancelsChangePassword").click(function(e){e.preventDefault(),$("#btnMisDatos").click(),writeLog("btnCancelsChangePassword")})},fn_showAlerts=function(){0!=scholar.alerts.length&&(1==scholar.alerts.length?loadTemplate("alertMessage",templates.alertScholar,{alertText:scholar.alerts[0].message}):loadTemplate("alertMessage",templates.multipleAlertScholar,{btnPrev:"Previous",btnNext:"Next"}))},fn_carouselItemAlert=function(){for(var e in scholar.alerts){var a=document.createElement("div");a.setAttribute("class","carousel-item"),a.innerHTML="<div style='margin:0px 30px'><i class='icon icon-72'></i>"+scholar.alerts[e].message+"</div>",document.getElementById("carouselInner").appendChild(a),0==e&&$("div .carousel-item").addClass("active")}};function loadPendingCards(){var e=0;for(var a in scholar.scholarship.confirmDispersion)if("Resuelto"===scholar.scholarship.confirmDispersion[a].statusReview||"En proceso"===scholar.scholarship.confirmDispersion[a].statusReview)if(0==$("#pendingCard > .card").length&&(loadTemplate("pendingCard",templates.cardPendientes,{subtitle:"Respuestas a dep\xF3sitos pendientes"}),$(".showAllAnswers").click(function(e){e.preventDefault(),fn_afterMisDatos=fn_scroll,$("#btnMisDatos").click()})),"Resuelto"===scholar.scholarship.confirmDispersion[a].statusReview){e++;var t=document.createElement("div"),o=document.createAttribute("id");o.value="responses"+scholar.scholarship.confirmDispersion[a].idMonth,t.setAttributeNode(o),document.getElementById("responses").appendChild(t),loadTemplate(o.value,templates.confirmSolved,{month:scholar.scholarship.confirmDispersion[a].monthConfirm,year:scholar.scholarship.confirmDispersion[a].yearConfirm,response:scholar.scholarship.confirmDispersion[a].statusScholarshipReceived})}else if("En proceso"===scholar.scholarship.confirmDispersion[a].statusReview){var t=document.createElement("div"),o=document.createAttribute("id");o.value="responses"+scholar.scholarship.confirmDispersion[a].monthConfirm+""+scholar.scholarship.confirmDispersion[a].yearConfirm,t.setAttributeNode(o),document.getElementById("responses").appendChild(t),loadTemplate(o.value,templates.confirmInProgress,{month:scholar.scholarship.confirmDispersion[a].monthConfirm,year:scholar.scholarship.confirmDispersion[a].yearConfirm,response:scholar.scholarship.confirmDispersion[a].statusScholarshipReceived})}$("a[href='#']").click(function(e){e.preventDefault()}),0==e?$("a[class='showAnswers']").hide():fn_showAnswers()}var fn_loadConfirmCardsHome=function(){if(0!=scholar.confirm.length)for(var e in scholar.confirm){var a=document.createElement("div");a.setAttribute("id","confirmacion"+scholar.confirm[e].idMonth),document.getElementById("confirmacion").appendChild(a),loadTemplate("confirmacion"+scholar.confirm[e].idMonth,templates.confirmacion,{idMonth:scholar.confirm[e].idMonth,month:scholar.confirm[e].month,year:scholar.confirm[e].year})}confirmacionPago(),loadPendingCards()};function confirmacionPago(){"1"==$("#btnSendConfirm").attr("data-fn")||($("#btnSendConfirm").attr("data-fn","1"),$("#btnSendConfirm").click(function(e){if(e.preventDefault(),meses=[],anhios=[],confirms=[],respuesta=[],0!=$("input:checkbox:checked").length){var a=[],t=0;$("input:checkbox:checked").each(function(){var e="",o="",s="";s=$("#confirmacion"+$(this).attr("data-month")+$(this).attr("data-year")).find($("select[name='status'] option:selected")).val(),0!=s&&(e=$(this).attr("data-month"),o=$(this).attr("data-year"),meses.push(e),anhios.push(o),confirms.push({service:"DEPOSIT_MODIFICATION",showWait:!1,data:{userCurrent:scholar.studentID,studentID:scholar.studentID,monthConfirm:e,yearConfirm:o,programType:scholar.scholarship.programType,scholarCycle:scholar.statusQualifications.schoolCycle,scholarLevel:scholar.statusQualifications.averagesScholarLevel[scholar.statusQualifications.averagesScholarLevel.length-1].scholarLevel,scholarGrade:scholar.statusQualifications.averagesScholarLevel[scholar.statusQualifications.averagesScholarLevel.length-1].schoolGrade,statusScholarshipReceived:s,statusReview:"",staffAnswer:""},success:rest_fnDepositModification,finallySuccess:function(){a.push(t),$("#confirmacion"+meses[t]+""+anhios[t]).hide(),t++}}))}),confirms.length&&(showModals("Enviando tus confirmaciones","Por favor espera",SCONFIG.getMessage("wait").idModal),writeLog("confirms",confirms),setTimeout(function(){if(confirms.forEach(function(e){restExec(e)}),$("#waitModal").modal("hide"),0!=a.length){for(var e in loadTemplate("messageSuccess",templates.successConfirm,{thanks:"Gracias"}),meses)$("p[name='confirm']").append("<span>"+meses[e]+" "+anhios[e]+"</span><br/>");writeLog("meses",meses,"a\xF1os",anhios),setTimeout(function(){$("#messageSuccess > .card-block").slideUp("slow",function(){scholar.confirm=[],scholar.scholarship.confirmDispersion=[],restExec({service:"DEPOSIT_QUERY",data:{userCurrent:scholar.studentID,studentID:scholar.studentID,programType:scholar.scholarship.programType,statusScholarshipReceived:""},success:rest_fnDepositQuery,finallySuccess:function(){loadCardsConfirmHome()}})})},2e3)}},400))}else showModals("Por favor selecciona el dep\xF3sito a confirmar","Gracias","errorFile")}))}function confirmacionPagoBeca(){$("#btnSendConfirm").click(function(e){if(e.preventDefault(),meses=[],anhios=[],confirms=[],respuesta=[],0!=$("input:checkbox:checked").length){var a=[],t=0;$("input:checkbox:checked").each(function(){var e="",o="",s="";s=$("#confirmacion"+$(this).attr("data-month")+$(this).attr("data-year")).find($("select[name='status'] option:selected")).val(),0!=s&&(e=$(this).attr("data-month"),o=$(this).attr("data-year"),meses.push(e),anhios.push(o),confirms.push({service:"DEPOSIT_MODIFICATION",showWait:!1,data:{userCurrent:scholar.studentID,studentID:scholar.studentID,monthConfirm:e,yearConfirm:o,programType:scholar.scholarship.programType,scholarCycle:scholar.statusQualifications.schoolCycle,scholarLevel:scholar.statusQualifications.averagesScholarLevel[scholar.statusQualifications.averagesScholarLevel.length-1].scholarLevel,scholarGrade:scholar.statusQualifications.averagesScholarLevel[scholar.statusQualifications.averagesScholarLevel.length-1].schoolGrade,statusScholarshipReceived:s,statusReview:"",staffAnswer:""},success:rest_fnDepositModification,finallySuccess:function(){a.push(t),$("#confirmacion"+meses[t]+""+anhios[t]).hide(),t++}}))}),confirms.length&&(showModals("Enviando tus confirmaciones","Por favor espera",SCONFIG.getMessage("wait").idModal),writeLog("confirms",confirms),setTimeout(function(){if(confirms.forEach(function(e,a){writeLog("curr_confirm,_iConfirm"),writeLog(e,a),restExec(e)}),$("#waitModal").modal("hide"),writeLog("arr_confSuccess",a.length),0!=a.length){for(var e in showModals("Gracias por confimar el dep\xF3sito de:","","savedFile"),meses)$("#messageSuccessModal").append("<span>"+meses[e]+" "+anhios[e]+"</span><br/>");scholar.confirm=[],scholar.scholarship.confirmDispersion=[],restExec({service:"DEPOSIT_QUERY",data:{userCurrent:scholar.studentID,studentID:scholar.studentID,programType:scholar.scholarship.programType,statusScholarshipReceived:""},success:rest_fnDepositQuery,finallySuccess:function(){actTable(),0==scholar.confirm.length?$("#depositosPendientes").html(""):($("#depositosPendientes").html(""),loadTemplate("depositosPendientes",templates.depositosPendientesBeca,{title:"Confirmaciones de dep\xF3sitos pendientes"}))}})}},400))}else showModals("Por favor selecciona el dep\xF3sito a confirmar","Gracias","errorFile")})}var fn_showAnswers=function(){$(".showAnswers").click(function(e){e.preventDefault(),fn_afterMisDatos=fn_scroll,$("#btnMisDatos").click()})},fn_afterMisDatos=fn_nothing,fn_scroll=function(){$("#becaAcordion").click();var e=$("#detalleDeposito").offset().top;$("html,body").animate({scrollTop:e+"px"},"slow")};function actTable(){""==scholar.scholarship.confirmDispersion?($("#accordion-deposit").parent().hide(),$("#accordion-deposit").hide()):($("#accordion-deposit").parent().show(),$("#accordion-deposit").show(),$("#tableConfirm > tbody tr td").remove(),scholar.scholarship.confirmDispersion.forEach(function(e){$("#tableConfirm > tbody tr:last").after("<tr><td class=\"text-center\">"+e.monthConfirm+" "+e.yearConfirm+"</td>"),"Incompleta"===e.statusScholarshipReceived?$("td:last").after("<td class=\"text-center warning\">Dep&oacute;sito incompleto</td>"):"No"===e.statusScholarshipReceived?$("td:last").after("<td class=\"text-center error\">Sin dep&oacute;sito</td>"):"S\xED"===e.statusScholarshipReceived&&$("td:last").after("<td class=\"text-center success\">Dep&oacute;sito completo</td>"),"En proceso"===e.statusReview?$("td:last").after("<td class=\"text-center warning\">"+e.statusReview+"</td>"):$("td:last").after("<td>"+e.statusReview+"</td>"),"En proceso"===e.staffAnswer?$("td:last").after("<td class=\"text-center warning\">"+e.staffAnswer+"</td>"):"Resuelto"===e.staffAnswer?$("td:last").after("<td class=\"text-center success\">"+e.staffAnswer+"</td>"):$("td:last").after("<td class=\"text-center\">"+e.staffAnswer+"</td>")}))}function loadShowUpdateFile(){$("a[data-tar=\"consultFile\"][data-loaded=\"0\"]").each(function(){$(this).on("click",function(a){a.preventDefault(),pre_fnloadFile($(this).attr("data-folio")),$(this).attr("data-loaded","1")})}),$("[data-btn=\"uploadFiles\"][data-loaded=\"0\"]").each(function(){$(this).on("click",function(){$("#uploadFiles").attr("data-grade",$(this).attr("data-grade")).attr("data-period",$(this).attr("data-period")).attr("data-document",$(this).attr("data-document"))}),$(this).attr("data-loaded","1")})}$(window).bind("beforeunload",function(){$.ajax({type:"GET",dataType:"html",contentType:"application/json; charset=utf-8",url:window.location.origin+"/pkmslogout.form",async:!1})});